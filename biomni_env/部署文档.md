#### 已解决的问题：biomni_env/scripts/wget_requests_equivalent.py

################## Biomni 升级

下次升级加入 apt-get install file less
调整合并位置

############ 升级前先备份

#docker save -o biomni_env-biomni-full_20250804.tar biomni_env-biomni-full:latest &

docker save -o biomni_env-biomni-full.1_20250806.tar biomni_env-biomni-full.1:latest &
tar -cf Biomni_20250806.tar Biomni &

############

git remote add upstream https://github.com/snap-stanford/Biomni.git

lishengting@MCNSZORX6444NB:~/work/Biomni$ git remote -v
fork    https://github.com/lishengting/Biomni.git (fetch)
fork    https://github.com/lishengting/Biomni.git (push)
origin  https://github.com/lishengting/Biomni.git (fetch)
origin  https://github.com/lishengting/Biomni.git (push)
upstream        https://github.com/snap-stanford/Biomni.git (fetch)
upstream        https://github.com/snap-stanford/Biomni.git (push)

################# merge 1

lishengting@MCNSZORX6444NB:~/work/Biomni$ git fetch upstream
remote: Enumerating objects: 221, done.
remote: Counting objects: 100% (152/152), done.
remote: Compressing objects: 100% (50/50), done.
remote: Total 221 (delta 125), reused 102 (delta 102), pack-reused 69 (from 2)
Receiving objects: 100% (221/221), 169.98 KiB | 888.00 KiB/s, done.
Resolving deltas: 100% (143/143), completed with 20 local objects.
From https://github.com/snap-stanford/Biomni
 * [new branch]      0.0.4_release               -> upstream/0.0.4_release
 * [new branch]      custom_support              -> upstream/custom_support
 * [new branch]      edit_contrib                -> upstream/edit_contrib
 * [new branch]      feature/add-datasets        -> upstream/feature/add-datasets
 * [new branch]      fix_environment             -> upstream/fix_environment
 * [new branch]      fix_parsing_error           -> upstream/fix_parsing_error
 * [new branch]      main                        -> upstream/main
 * [new branch]      pip_bug_fix                 -> upstream/pip_bug_fix
 * [new branch]      pre-commit-ci-update-config -> upstream/pre-commit-ci-update-config
 * [new branch]      readme_security             -> upstream/readme_security

################# merge 20250804

lishengting@MCNSZORX6444NB:~/work/Biomni$ git fetch upstream
remote: Enumerating objects: 607, done.
remote: Counting objects: 100% (363/363), done.
remote: Compressing objects: 100% (142/142), done.
remote: Total 607 (delta 297), reused 232 (delta 221), pack-reused 244 (from 2)
Receiving objects: 100% (607/607), 324.24 KiB | 1.42 MiB/s, done.
Resolving deltas: 100% (423/423), completed with 18 local objects.
From https://github.com/snap-stanford/Biomni
 * [new branch]      add_mcp                       -> upstream/add_mcp
 * [new branch]      dataset/openfda               -> upstream/dataset/openfda
   732f7a9..55ed5c0  feature/add-datasets          -> upstream/feature/add-datasets
   174ac3e..593b680  fix_environment               -> upstream/fix_environment
 * [new branch]      kexinhuang12345-patch-1       -> upstream/kexinhuang12345-patch-1
   7a05446..f4c3cca  main                          -> upstream/main
 * [new branch]      pr-79                         -> upstream/pr-79
   56b6ea3..1e737be  pre-commit-ci-update-config   -> upstream/pre-commit-ci-update-config
 * [new branch]      revert-102-yield_each_message -> upstream/revert-102-yield_each_message
 
 
git status
git branch
git checkout -b backup-before-merge
git checkout main

git merge upstream/main

################# merge 1

CONFLICT (content): Merge conflict in README.md
Auto-merging biomni/agent/a1.py
CONFLICT (content): Merge conflict in biomni/agent/a1.py
Auto-merging biomni/env_desc.py
Auto-merging biomni/llm.py
CONFLICT (content): Merge conflict in biomni/llm.py
Automatic merge failed; fix conflicts and then commit the result.

################# merge 250804

Auto-merging .gitignore
CONFLICT (content): Merge conflict in .gitignore
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Auto-merging biomni/agent/a1.py
CONFLICT (content): Merge conflict in biomni/agent/a1.py
Auto-merging biomni/env_desc.py
Auto-merging biomni/llm.py
CONFLICT (content): Merge conflict in biomni/llm.py
Auto-merging biomni/tool/database.py
CONFLICT (content): Merge conflict in biomni/tool/database.py
Auto-merging biomni/tool/pharmacology.py
Auto-merging biomni/tool/tool_description/database.py
Auto-merging biomni_env/environment.yml
CONFLICT (content): Merge conflict in biomni_env/environment.yml
Automatic merge failed; fix conflicts and then commit the result.

#### 手工解决冲突

git add .
git commit -m "Merge upstream changes and resolve conflicts"

git push origin main

##########################


python scripts/check_env.py > check_env.log 2> check_env.err &
python scripts/check_s3_file.py

less check_env.log|grep ❌

##########################

conda install -c conda-forge vina --yes
conda install -c conda-forge openbabel --yes

conda install -c hcc adfr-suite --yes

备选方案​（需排查冲突）：
conda install -c conda-forge -c ccsb-scripps adfr-suite --yes
##conda install -c conda-forge numpy=1.21  # 手动指定兼容版本[10](@ref)

pip install deeppurpose descriptastorus flowkit hyperopt pyscreener tiledb

#pip install openbabel
